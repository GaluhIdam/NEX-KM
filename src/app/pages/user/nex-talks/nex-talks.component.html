<!-- Search & Trend Section -->
<div class="flex justify-center py-20 bg-center bg-library">
  <div class="grid grid-rows-2 gap-4 max-[600px]:px-3">
    <div class="min-[600px]:w-[32rem] place-self-center">
      <h1
        class="text-white font-bold text-center min-[600px]:text-4xl max-[600px]:text-2xl"
      >
        Explore New Experience of Collaboration
      </h1>
    </div>
    <div
      class="relative mb-4 flex min-[600px]:w-[800px] flex-wrap items-stretch bg-white rounded-full mt-4"
    >
      <button
        class="relative z-[2] rounded-l px-4 py-2 text-xs font-medium uppercase leading-tight text-primary transition duration-150 ease-in-out hover:bg-black hover:bg-opacity-5"
        type="button"
        id="button-addon1"
      >
        <fa-icon [icon]="faSearch" class="text-black"></fa-icon>
      </button>
      <input
        type="text"
        class="h-11 relative m-0 block w-[1px] min-w-0 flex-auto rounded-r bg-transparent bg-clip-padding px-3 py-[0.25rem] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition ease-in-out"
        placeholder="Search"
        aria-label="Example text with button addon"
        aria-describedby="button-addon1"
      />
    </div>
    <h1 class="text-white">TRENDING SEARCH</h1>
    <div>
      <ul
        class="flex flex-wrap pl-0 list-none md:flex-row"
        role="tablist"
        data-te-nav-ref
      >
        <li class="mx-2 mb-2">
          <button
            type="button"
            class="px-4 py-1 text-white bg-transparent border rounded-full border-1 hover:bg-white hover:text-black"
          >
            Travelling
          </button>
        </li>
        <li class="mx-2 mb-2">
          <button
            type="button"
            class="px-4 py-1 text-white bg-transparent border rounded-full border-1 hover:bg-white hover:text-black"
          >
            Interior Design
          </button>
        </li>
        <li class="mx-2 mb-2">
          <button
            type="button"
            class="px-4 py-1 text-white bg-transparent border rounded-full border-1 hover:bg-white hover:text-black"
          >
            Music
          </button>
        </li>
        <li class="mx-2 mb-2">
          <button
            type="button"
            class="px-4 py-1 text-white bg-transparent border rounded-full border-1 hover:bg-white hover:text-black"
          >
            Dancing
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="relative px-20">
  <div class="grid grid-rows-2 gap-0">
    <h1 class="px-2 mt-16 text-4xl font-bold text-center">
      Anything interesting to share?
    </h1>
    <div>
      <p class="text-center h-fit mt-3 max-[600px]:text-sm px-2">
        Become a part of our community and contribute to the platform by
        uploading your own content.
      </p>
      <div class="flex justify-center">
        <button
          data-te-ripple-init
          data-te-ripple-color="light"
          (click)="postForumPage()"
          class="w-fit inline-block mx-2 mt-8 rounded bg-new-primary px-6 py-3 font-medium max-[600px]:text-xs uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-new-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-new-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-new-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]"
        >
          <fa-icon [icon]="faBookOpen" class="mr-2 text-white"></fa-icon>
          Post Forum
        </button>
        <button
          data-te-ripple-init
          data-te-ripple-color="light"
          (click)="myPodcastPage()"
          class="w-fit inline-block mx-2 mt-8 rounded bg-new-primary px-6 py-3 font-medium max-[600px]:text-xs uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-new-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-new-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-new-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]"
        >
          <fa-icon [icon]="faVolumeHigh" class="mr-2 text-white"></fa-icon>
          Upload Podcast
        </button>
        <button
          data-te-ripple-init
          data-te-ripple-color="light"
          (click)="publishStreamPage()"
          class="w-fit inline-block mx-2 mt-8 rounded bg-new-primary px-6 py-3 font-medium max-[600px]:text-xs uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-new-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-new-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-new-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]"
        >
          <fa-icon [icon]="faFilm" class="mr-2 text-white"></fa-icon>
          Publish Stream
        </button>
      </div>
    </div>
  </div>
  <!-- Nex Forum -->
  <section>
    <!-- Header -->
    <div class="grid grid-cols-2 mt-20 mb-10">
      <div>
        <p class="text-4xl font-semibold text-blue-800">NEX Forum</p>
      </div>
      <div class="text-right">
        <p
          class="text-lg font-semibold text-blue-800 cursor-pointer hover:text-blue-500"
          (click)="forumPage()"
        >
          See All
        </p>
      </div>
    </div>
    <ng-container *ngIf="isForumLoading">
      <div class="flex items-center justify-center h-56">
        <app-loading></app-loading>
      </div>
    </ng-container>
    <!-- Loop here -->
    <ng-container *ngIf="!isForumLoading">
      <ng-container *ngIf="forumData.length > 0; else emptyForumData">
        <ng-container *ngFor="let forum of forumData; let i = index">
          <div
            class="block w-full p-6 mb-3 bg-white rounded-lg shadow-xl bg-opacity-40"
          >
            <div class="grid grid-cols-2">
              <div>
                <h5
                  class="mb-2 text-xl font-medium leading-tight text-neutral-800"
                >
                  {{ forum.title }}
                </h5>
                <span>
                  <span
                    class="inline-block whitespace-nowrap rounded-full cursor-pointer bg-blue-300 hover:bg-blue-400 px-[0.65em] pt-[0.35em] pb-[0.25em] text-center align-baseline text-[0.75em] font-bold leading-none text-white"
                  >
                    <fa-icon [icon]="faTag" class="mr-2 text-white"></fa-icon>
                    {{ forum.talkCategory.name }}
                  </span>
                </span>
              </div>
              <div class="text-right">
                <a
                  data-te-dropdown-item-ref
                  data-te-toggle="modal"
                  [attr.data-te-target]="'#shareModal' + forum.uuid"
                  data-te-ripple-init
                  data-te-ripple-color="light"
                >
                  <fa-icon
                    [icon]="faShareNodes"
                    class="text-xl text-gray-400 cursor-pointer"
                  ></fa-icon>
                </a>
              </div>
              <app-share-modal
                [uuid]="forum.uuid"
                [content]="'forum'"
                [urlToShare]="
                  'http://172.16.41.107:3011/user/nex-talks/forum/comments/' +
                  forum.uuid
                "
              ></app-share-modal>
            </div>
            <img
              *ngIf="forum.path !== '-'"
              [src]="forum.path"
              [alt]="forum.title"
              class="mt-3 rounded-3xl min-[600px]:w-4/12 min-[600px]:h-80 max-[600px]:w-full max-[600px]:h-60"
            />

            <ng-container *ngIf="parsedForumDescriptions[i].length > 1000">
              <ng-container *ngIf="isShowMoreButtonClicked[i]">
                <p
                  class="mt-3 mb-4 text-base text-neutral-600"
                  [innerHTML]="parsedForumDescriptions[i]"
                ></p>
              </ng-container>
              <ng-container *ngIf="!isShowMoreButtonClicked[i]">
                <p
                  class="mt-3 mb-4 text-base text-neutral-600"
                  [innerHTML]="
                    parsedForumDescriptions[i].substr(0, 1000) + '...'
                  "
                ></p>
              </ng-container>

              <button
                class="p-2 mb-4 text-xs font-bold text-blue-500 bg-blue-100 rounded-xl w-fit hover:shadow-lg"
                [hidden]="isShowMoreButtonClicked[i]"
                (click)="onClickedShowMoreButton(i)"
              >
                Show More
              </button>
              <button
                class="p-2 mb-4 text-xs font-bold text-blue-500 bg-blue-100 rounded-xl w-fit hover:shadow-lg"
                [hidden]="!isShowMoreButtonClicked[i]"
                (click)="onClickedShowMoreButton(i)"
              >
                Show Less
              </button>
            </ng-container>

            <ng-container *ngIf="parsedForumDescriptions[i].length < 1000">
              <p
                class="mt-3 mb-4 text-base text-neutral-600"
                [innerHTML]="parsedForumDescriptions[i]"
              ></p>
            </ng-container>

            <hr />
            <div class="grid grid-cols-2">
              <div class="flex items-center mt-3 space-x-4">
                <div class="flex-shrink-0">
                  <img
                    class="w-8 h-8 rounded-full"
                    [src]="
                      forumUploaders[i].userPhoto !== ''
                        ? forumUploaders[i].userPhoto
                        : '../../../../assets/image/empty-profile-image.jpeg'
                    "
                    alt="forum uploaders"
                  />
                </div>
                <div class="flex min-w-0 gap-2">
                  <p class="text-base font-medium text-gray-500">Posted by</p>
                  <p
                    class="text-base text-blue-500 cursor-pointer hover:text-blue-400"
                    (click)="
                      forumUploaders[i].personalNumber !== ''
                        ? onGotoUserPage(forumUploaders[i].personalNumber)
                        : undefined
                    "
                  >
                    {{ forumUploaders[i].userName }}
                  </p>
                  <p class="text-base text-gray-500">
                    {{ calculateTimeDifference(forum.createdAt) }}
                  </p>
                </div>
              </div>
              <div class="flex items-center justify-end mt-3">
                <span
                  class="flex items-center h-full gap-2 text-blue-600 cursor-pointer"
                  (click)="forumComment(forum)"
                >
                  <fa-icon
                    [icon]="faMessage"
                    class="text-xl text-gray-400"
                  ></fa-icon>
                  <p>{{ filteredForumComments(forum.forumComment) }} +</p>
                </span>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
      <ng-template #emptyForumData>
        <div class="flex items-center justify-center h-40">
          <h2>No Forums available.</h2>
        </div>
      </ng-template>
    </ng-container>
  </section>
  <!-- End of Nex Forum -->

  <!-- Nex Podcast -->
  <section>
    <!-- Header -->
    <div class="grid grid-cols-2 mt-20 mb-10">
      <div>
        <p class="text-4xl font-semibold text-blue-800">NEX Podcast</p>
      </div>
      <div class="text-right">
        <p
          class="text-lg font-semibold text-blue-800 cursor-pointer hover:text-blue-500"
          (click)="podcastPage()"
        >
          See All
        </p>
      </div>
    </div>
    <!-- Body -->
    <ng-container *ngIf="isPodcastSerieLoading">
      <div class="flex items-center justify-center h-56">
        <app-loading></app-loading>
      </div>
    </ng-container>
    <ng-container *ngIf="!isPodcastSerieLoading">
      <ng-container *ngIf="podcastSerieData.length > 0; else emptyPodcastData">
        <div class="grid gap-5 lg:grid-cols-6 xs:grid-cols-2">
          <!-- Loop here -->
          <ng-container *ngFor="let podcast of podcastSerieData">
            <div
              class="block max-w-sm text-center bg-white rounded-lg cursor-pointer"
            >
              <img
                class="object-cover object-center w-full shadow-lg h-52 rounded-xl"
                [src]="podcast.path"
                alt=""
              />
              <h5
                class="mt-4 mb-2 text-xl font-semibold leading-tight text-neutral-800"
              >
                {{
                  podcast.title.length > 20
                    ? podcast.title.substr(0, 20) + ".."
                    : podcast.title
                }}
              </h5>
              <p class="mb-4 text-base text-neutral-600">
                {{
                  podcast.creator.name.length > 30
                    ? podcast.creator.name.substr(0, 30) + ".."
                    : podcast.creator.name
                }}
              </p>
            </div>
          </ng-container>
        </div>
      </ng-container>
      <ng-template #emptyPodcastData>
        <div class="flex items-center justify-center h-40">
          <h2>No podcast series available.</h2>
        </div>
      </ng-template>
    </ng-container>
  </section>
  <!-- End of Nex Podcast -->

  <!-- Nex Stream -->
  <section>
    <!-- Header -->
    <div class="grid grid-cols-2 mt-20 mb-10">
      <div>
        <p class="text-4xl font-semibold text-blue-800">NEX Stream</p>
      </div>
      <div class="text-right">
        <p
          class="text-lg font-semibold text-blue-800 cursor-pointer hover:text-blue-500"
          (click)="streamPage()"
        >
          See All
        </p>
      </div>
    </div>
    <!-- Body -->
    <ng-container *ngIf="isStreamLoading">
      <div class="flex items-center justify-center h-56">
        <app-loading></app-loading>
      </div>
    </ng-container>
    <ng-container *ngIf="!isStreamLoading">
      <ng-container *ngIf="streamData.length > 0; else emptyStreamData">
        <div class="grid gap-3 lg:grid-cols-4 xs:grid-cols-1">
          <!-- Loop Here -->
          <ng-container *ngFor="let stream of streamData; let i = index">
            <div
              class="block w-64 mb-5 rounded-lg cursor-pointer xs:mx-auto xs:w-full"
              (click)="streamStreaming(stream.uuid)"
            >
              <img
                class="object-cover object-center w-full h-52 rounded-2xl"
                [src]="stream.pathThumbnail"
                alt=""
              />
              <!-- <div
                mat-card-image
                plyr
                [plyrOptions]="{
                  autoplay: false,
                  controls: ['play', 'mute', 'progress', 'fullscreen'],
                  clickToPlay: true
                }"
                [plyrTitle]="stream.title"
                [plyrPlaysInline]="true"
                [plyrCrossOrigin]="false"
                [plyrSources]="[
                  {
                    src: stream.pathVideo,
                    type: 'video/mp4',
                    size: 576,
                    provider: 'html5'
                  }
                ]"
                (plyrInit)="player = $event"
                (plyrPlay)="played($event)"
              ></div> -->
              <div class="flex items-center gap-0 mt-3">
                <div class="">
                  <img
                    [src]="photoStreamUploaders[i]"
                    class="object-cover object-center h-auto rounded-full w-14"
                    alt="avatar"
                    loading="lazy"
                  />
                </div>
                <div class="flex-1 ml-4">
                  <p class="mt-2 text-base font-semibold">
                    {{ stream.title }}
                  </p>
                  <p class="mt-2 text-sm">{{ stream.createdBy }}</p>
                  <p class="text-sm">
                    {{ convertViewsFormat(stream.streamWatch.length) }} views •
                    {{ calculateTimeDifference(stream.createdAt) }}
                  </p>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </ng-container>
      <ng-template #emptyStreamData>
        <div class="flex items-center justify-center h-40">
          <h2>No Stream available.</h2>
        </div>
      </ng-template>
    </ng-container>
    <!-- End of Nex Stream -->
  </section>

  <img
    class="absolute left-0 rotate-180 top-1/2 -z-10"
    src="../../../../assets/image/home-page/gradient/228.png"
    alt=""
  />
  <img
    class="absolute right-0 top-1/2 -z-20"
    src="../../../../assets/image/home-page/gradient/229.png"
    alt=""
  />
</div>

<img
  class="absolute left-0 top-2/3 -z-20"
  src="../../../../assets/image/home-page/gradient/227.png"
  alt=""
/>

<img
  class="absolute right-0 top-3/4 -z-10"
  src="../../../../assets/image/home-page/gradient/228.png"
  alt=""
/>

<img
  class="absolute right-0 top-1/2 -z-20"
  src="../../../../assets/image/home-page/gradient/229.png"
  alt=""
/>
